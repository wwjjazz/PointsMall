<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>个人中心</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./css/minireset.css">
    <link rel="stylesheet" href="http://at.alicdn.com/t/font_649758_nz1kuncn76z85mi.css">
    <link rel="stylesheet" href="./css/intinfo.css">
</head>
<body>
    <div class="backbtn">
        <i class="iconfont icon-back"></i>
    </div>
    <ul class="list">
        <!-- <li>
            <p>
                <span>积分来源：</span>
                <span>听什么歌都像在唱自己 网易云评论书音乐评笔记丁磊陈鸿宇推荐音乐曲书籍畅销图书排行榜.</span>
            </p>
            <p>
                <span>积分变化：</span>
                <span>999积分</span>
            </p>
            <p>
                <span>兑换时间：</span>
                <span>2017-01-12</span>
            </p>
        </li>
        <li>
            <p>
                <span>积分来源：</span>
                <span>听什么歌都像在唱自己 网易云评论书音乐评笔记丁磊陈鸿宇推荐音乐曲书籍畅销图书排行榜.</span>
            </p>
            <p>
                <span>积分变化：</span>
                <span>999积分</span>
            </p>
            <p>
                <span>兑换时间：</span>
                <span>2017-01-12</span>
            </p>
        </li>
        <li>
            <p>
                <span>积分来源：</span>
                <span>听什么歌都像在唱自己 网易云评论书音乐评笔记丁磊陈鸿宇推荐音乐曲书籍畅销图书排行榜.</span>
            </p>
            <p>
                <span>积分变化：</span>
                <span>999积分</span>
            </p>
            <p>
                <span>兑换时间：</span>
                <span>2017-01-12</span>
            </p>
        </li> -->
    </ul>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
    <script src="./js/common.js"></script>
    <script>
        var backBtn = document.querySelector(".backbtn");
        backBtn.ontouchend = function () {
            console.log(window.location);
            window.history.back();
        }
        var list = document.querySelector(".list");
        var host = "http://112.124.116.84/integral/";

        $.ajax({
            url: host + "get_detail",
            dataType: 'json'
        }).done(function (data, status, jqXHR) {
            if (data.state) {
                var info = data.message;
                
                info.forEach(function (el, i) {
                    console.log(el)
                    var li = document.createElement("li");
                    li.innerHTML = `
                    <p>
                        <span>积分来源：</span>
                        <span>${el.from}</span>
                    </p>
                    <p>
                        <span>积分变化：</span>
                        <span style="color:${el.integral<0?"#fe0b04":"#09ab01"}">${el.integral}积分</span>
                    </p>
                    <p>
                        <span>兑换时间：</span>
                        <span>${el.create_time}</span>
                    </p>    
                        `;
                    list.appendChild(li);
                })
            } else {
                alert(data.message);
            }
        })
    </script>
</body>
</html>